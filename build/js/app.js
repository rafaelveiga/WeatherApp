var el,s,WeatherApp={cachedElements:{$city:$(".city"),$weatherIcon:$(".weatherIcon"),$temperature:$(".temperature"),$maxTemperature:$(".maxTemp p"),$minTemperature:$(".minTemp p"),$wind:$(".wind p"),$sunrise:$(".sunrise p"),$sunset:$(".sunset p"),$humidity:$(".humidity p")},settings:{baseURL:"http://api.openweathermap.org/data/2.5/weather?jsoncallback",appID:"2de143494c0b295cca9337e1e96b00e0",userCity:null,weatherDesc:null,colorScheme:$("body").attr("id")},init:function(){el=this.cachedElements,s=this.settings,this.updateUserLocation(),this.getWeatherData(),this.updateAppColor(s.weatherDesc)},updateUserLocation:function(){$.ajax({url:"http://ipinfo.io",async:!1,dataType:"json",success:function(e){s.userCity=e.city,el.$city.text(e.city)}})},getWeatherData:function(){$.ajax({url:s.baseURL,async:!1,data:{appid:s.appID,q:s.userCity,units:"metric"},dataType:"json",success:function(e){var t=Math.floor(e.main.temp),a=Math.floor(e.main.temp_max),n=Math.floor(e.main.temp_min),r=e.wind.speed,i=e.wind.deg,p=WeatherApp.convertUNIXDate(e.sys.sunrise),o=WeatherApp.convertUNIXDate(e.sys.sunset),c=e.main.humidity,m=e.weather[0].icon;s.weatherDesc=e.weather[0].main,el.$temperature.text(t+"째C"),el.$weatherIcon.attr("src","http://openweathermap.org/img/w/"+m+".png"),el.$maxTemperature.text(a+"째C"),el.$minTemperature.text(n+"째C"),el.$wind.html(r+"<small>km/h</small> "+i+"째"),el.$sunrise.html(p),el.$sunset.html(o),el.$humidity.html(c)}})},updateAppColor:function(e){e=e.replace(" ","_"),e=e.toLowerCase(),$("body").attr("id",e)},convertUNIXDate:function(e){var e=new Date(1e3*e),t=e.getHours();1===t.toString().length&&(t="0"+t);var a=e.getMinutes();1===a.toString().length&&(a="0"+a);var n=t+":"+a;return n}};WeatherApp.init();